<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lofi Wallpaper</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    :root {
      --primary: #2e2b4f;
      --secondary: #5f527a;
      --accent: #a894c2;
      --text: #f3f0ff;
      --soft: #ddd8ee;
      --cat-primary: #8a7bb3;
      --cat-secondary: #60507c;
      --cat-accent: #ffd6ff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(-45deg, var(--primary), var(--secondary), #3a3356, #4a3b72);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      height: 100vh;
      overflow: hidden;
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      transition: all 0.5s ease;
    }
    
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .header {
      text-align: center;
      margin-bottom: 1.5rem;
      z-index: 10;
    }
    
    .title {
      font-size: 2.5rem;
      font-weight: 700;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
    }
    
    .player-container {
      position: relative;
      width: 30%;
      min-width: 320px;
      max-width: 600px;
      z-index: 10;
      margin-bottom: 1.5rem;
    }
    
    .player {
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
      position: relative;
      overflow: hidden;
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
    }
    
    .player iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .controls {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      z-index: 10;
      margin-bottom: 30px;
    }
    
    .btn {
      padding: 0.7rem 1.2rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50px;
      color: var(--text);
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }
    
    .btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    }
    
    .btn.active {
      background: var(--accent);
      color: var(--primary);
    }
    
    .fullscreen-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      color: var(--text);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      z-index: 100;
    }
    
    .fullscreen-btn:hover {
      background: rgba(0, 0, 0, 0.5);
      transform: scale(1.1);
    }
    
    .fullscreen-btn i {
      font-size: 1.2rem;
    }
    
    /* Sakura Color Palette */
    .sakura-palette {
      position: fixed;
      bottom: 30px;
      left: 30px;
      z-index: 100;
      width: 150px;
      height: 150px;
    }
    
    .sakura-flower {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .sakura-petal {
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.5);
      position: absolute;
      overflow: hidden;
      border-radius: 35% 70% 35% 70%;
      transform-origin: center;
    }
    
    .sakura-petal:hover {
      transform: scale(1.1) rotate(15deg);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    }
    
    .sakura-petal.active {
      border: 3px solid white;
      transform: scale(1.1);
    }
    
    .sakura-petal::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 100%);
    }
    
    /* Sakura petal positions */
    .sakura-center {
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 5;
      width: 45px;
      height: 45px;
      border-radius: 50%;
    }
    
    .sakura-petal-1 {
      top: 10%;
      left: 50%;
      transform: translate(-50%, 0) rotate(0deg);
    }
    
    .sakura-petal-2 {
      top: 25%;
      left: 85%;
      transform: translate(-50%, 0) rotate(60deg);
    }
    
    .sakura-petal-3 {
      top: 75%;
      left: 85%;
      transform: translate(-50%, 0) rotate(120deg);
    }
    
    .sakura-petal-4 {
      top: 90%;
      left: 50%;
      transform: translate(-50%, 0) rotate(180deg);
    }
    
    .sakura-petal-5 {
      top: 75%;
      left: 15%;
      transform: translate(-50%, 0) rotate(240deg);
    }
    
    .sakura-petal-6 {
      top: 25%;
      left: 15%;
      transform: translate(-50%, 0) rotate(300deg);
    }
    
    #theme-night {
      background: linear-gradient(45deg, #2e2b4f, #5f527a);
    }
    
    #theme-day {
      background: linear-gradient(45deg, #9ac4f8, #63a7e8);
    }
    
    #theme-pink {
      background: linear-gradient(45deg, #ff9aa2, #e06377);
    }
    
    #theme-forest {
      background: linear-gradient(45deg, #3d5444, #7c9960);
    }
    
    #theme-ocean {
      background: linear-gradient(45deg, #25283d, #4a6d7c);
    }
    
    #theme-sunset {
      background: linear-gradient(45deg, #ff7e5f, #feb47b);
    }
    
    #theme-galaxy {
      background: linear-gradient(45deg, #311b92, #7c4dff);
    }
    
    .quote-container {
      position: absolute;
      bottom: 30px;
      text-align: center;
      max-width: 80%;
      z-index: 10;
    }
    
    .quote {
      font-size: 1.2rem;
      font-style: italic;
      font-weight: 300;
      background: rgba(0, 0, 0, 0.3);
      padding: 1rem 1.5rem;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      transition: opacity 0.5s ease;
    }
    
    /* Starry Background */
    .stars-container {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0;
      animation: twinkle 4s infinite ease-in-out;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0; }
      50% { opacity: 0.8; }
    }
    
    /* Lofi Cats */
    .lofi-cat {
      position: absolute;
      width: 60px;
      height: 60px;
      z-index: 5;
      pointer-events: none;
      filter: drop-shadow(0 0 10px rgba(var(--glow-color, 255, 150, 255), 0.7));
      transition: transform 0.3s ease-out;
    }
    
    .cat-trail {
      position: absolute;
      width: 100%;
      height: 30px;
      top: 50%;
      left: -20px;
      transform: translateY(-50%);
      z-index: -1;
      opacity: 0.4;
    }
    
    /* Theme-specific variables */
    .night-theme {
      --primary: #2e2b4f;
      --secondary: #5f527a;
      --accent: #a894c2;
      --text: #f3f0ff;
      --soft: #ddd8ee;
      --cat-primary: #8a7bb3;
      --cat-secondary: #60507c;
      --cat-accent: #ffd6ff;
    }
    
    .day-theme {
      --primary: #7fa5cf;
      --secondary: #aad2ff;
      --accent: #f2d7ee;
      --text: #333344;
      --soft: #ffffff;
      --cat-primary: #64b5f6;
      --cat-secondary: #3d89dc;
      --cat-accent: #d0edff;
    }
    
    .pink-theme {
      --primary: #ff9aa2;
      --secondary: #e06377;
      --accent: #ffb7c5;
      --text: #4d243d;
      --soft: #fbe0e4;
      --cat-primary: #f48fb1;
      --cat-secondary: #e06377;
      --cat-accent: #fce4ec;
    }
    
    .forest-theme {
      --primary: #3d5444;
      --secondary: #7c9960;
      --accent: #a5be83;
      --text: #f4f7eb;
      --soft: #bfd8bd;
      --cat-primary: #81c784;
      --cat-secondary: #558b2f;
      --cat-accent: #c8e6c9;
    }
    
    .ocean-theme {
      --primary: #25283d;
      --secondary: #4a6d7c;
      --accent: #8dbdd1;
      --text: #f2f9fc;
      --soft: #c9e4f6;
      --cat-primary: #4fc3f7;
      --cat-secondary: #0288d1;
      --cat-accent: #bbdefb;
    }
    
    .sunset-theme {
      --primary: #ff7e5f;
      --secondary: #feb47b;
      --accent: #ffda8e;
      --text: #4d2c1e;
      --soft: #fcefe8;
      --cat-primary: #ff8a65;
      --cat-secondary: #e64a19;
      --cat-accent: #ffd180;
    }
    
    .galaxy-theme {
      --primary: #311b92;
      --secondary: #7c4dff;
      --accent: #b39ddb;
      --text: #ffffff;
      --soft: #e0dcf0;
      --cat-primary: #9575cd;
      --cat-secondary: #5e35b1;
      --cat-accent: #d1c4e9;
    }
    
    .volume-control {
      position: absolute;
      right: -15px;
      top: 50%;
      transform: translateY(-50%);
      width: 30px;
      height: 100px;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 15;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }
    
    .volume-control input {
      transform: rotate(-90deg);
      width: 80px;
      margin: 0;
      cursor: pointer;
    }
    
    .volume-icon {
      margin-top: 5px;
      color: white;
      font-size: 14px;
    }
    
    .mute-btn {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 16px;
      margin-top: 5px;
    }

    /* Animation pour les pétales de sakura qui tombent */
    .falling-petal {
      position: absolute;
      width: 20px;
      height: 20px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.7;
      z-index: 3;
      pointer-events: none;
      animation: fall 10s linear infinite;
    }

    @keyframes fall {
      0% {
        transform: translateY(-5%) rotate(0deg) scale(0.6);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(100vh) rotate(360deg) scale(0.6);
        opacity: 0.2;
      }
    }
  </style>
</head>
<body class="night-theme">
  <div class="stars-container" id="stars-container"></div>
  <div id="falling-petals-container"></div>
  
  <!-- Header -->
  <header class="header">
    <h1 class="title">🌌 Lofi Wallpaper 🌌</h1>
  </header>
  
  <!-- Player -->
  <div class="player-container">
    <div class="player" id="player">
      <iframe id="youtube-player" 
              src="https://www.youtube.com/embed/jfKfPfyJRdk?autoplay=1&mute=0&loop=1&playlist=jfKfPfyJRdk&enablejsapi=1"
              allow="autoplay; encrypted-media" 
              allowfullscreen>
      </iframe>
    </div>
    
    <div class="volume-control">
      <input type="range" id="volume-slider" min="0" max="100" value="70">
      <button class="mute-btn" id="mute-btn"><i class="fas fa-volume-up"></i></button>
    </div>
  </div>
  
  <!-- Controls -->
  <div class="controls">
    <button class="btn active" data-video="jfKfPfyJRdk" id="lofi-btn">
      <i class="fas fa-headphones"></i> Lofi Girl
    </button>
    <button class="btn" data-video="5qap5aO4i9A" id="chillhop-btn">
      <i class="fas fa-music"></i> Chillhop
    </button>
    <button class="btn" data-video="n61ULEU7CO0" id="study-btn">
      <i class="fas fa-book"></i> Study Vibes
    </button>
    <button class="btn" data-video="4xDzrJKXOOY" id="chillpop-btn">
      <i class="fas fa-coffee"></i> Aesthetic Mix
    </button>
    <button class="btn" data-video="rUxyKA_-grg" id="sleep-btn">
      <i class="fas fa-moon"></i> Rain Lofi
    </button>
  </div>
  
  <!-- Color Palette in Sakura Shape -->
  <div class="sakura-palette">
    <div class="sakura-flower">
      <div class="sakura-petal sakura-center active" id="theme-night"></div>
      <div class="sakura-petal sakura-petal-1" id="theme-day"></div>
      <div class="sakura-petal sakura-petal-2" id="theme-pink"></div>
      <div class="sakura-petal sakura-petal-3" id="theme-forest"></div>
      <div class="sakura-petal sakura-petal-4" id="theme-ocean"></div>
      <div class="sakura-petal sakura-petal-5" id="theme-sunset"></div>
      <div class="sakura-petal sakura-petal-6" id="theme-galaxy"></div>
    </div>
  </div>
  
  <!-- Fullscreen Button -->
  <button class="fullscreen-btn" id="fullscreen-btn">
    <i class="fas fa-expand"></i>
  </button>
  
  <!-- Quote -->
  <div class="quote-container">
    <div class="quote" id="quote">"Breathe. You're here now."</div>
  </div>
  
  <!-- Lofi Cats Container -->
  <div id="lofi-cats-container"></div>
  
  <script>
    // Variables globales
    let ytPlayer = null;
    const buttons = document.querySelectorAll('.controls .btn');
    const fullscreenBtn = document.getElementById('fullscreen-btn');
    const colorOptions = document.querySelectorAll('.sakura-petal');
    const quoteElement = document.getElementById('quote');
    const starsContainer = document.getElementById('stars-container');
    const lofiCatsContainer = document.getElementById('lofi-cats-container');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const fallingPetalsContainer = document.getElementById('falling-petals-container');
    
    // YouTube API
    function loadYouTubeAPI() {
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      const firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      console.log("YouTube API script added");
    }
    
    // YouTube API will call this function when ready
    window.onYouTubeIframeAPIReady = function() {
      console.log("YouTube API ready");
      const videoId = document.querySelector('.controls .active').getAttribute('data-video');
      
      ytPlayer = new YT.Player('youtube-player', {
        videoId: videoId,
        playerVars: {
          'autoplay': 1,
          'controls': 0,
          'loop': 1,
          'playlist': videoId,
          'modestbranding': 1,
          'showinfo': 0,
          'rel': 0
        },
        events: {
          'onReady': onPlayerReady,
          'onError': onPlayerError
        }
      });
    };
    
    function onPlayerError(event) {
      console.error("YouTube Player Error:", event.data);
    }
    
    function onPlayerReady(event) {
      console.log("YouTube Player ready");
      // Set initial volume
      event.target.setVolume(70);
      
      // Setup volume slider
      volumeSlider.addEventListener('input', function() {
        ytPlayer.setVolume(this.value);
        
        // Update mute button icon
        if (parseInt(this.value) === 0) {
          muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
        } else if (parseInt(this.value) < 50) {
          muteBtn.innerHTML = '<i class="fas fa-volume-down"></i>';
        } else {
          muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
        }
      });
      
      // Setup mute button
      let isMuted = false;
      muteBtn.addEventListener('click', function() {
        if (isMuted) {
          ytPlayer.unMute();
          ytPlayer.setVolume(parseInt(volumeSlider.value));
          muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
        } else {
          ytPlayer.mute();
          muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
        }
        isMuted = !isMuted;
      });
      
      // Setup video buttons now that player is ready
      setupVideoButtons();
    }
    
    // Sélection des vidéos
    function setupVideoButtons() {
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const videoId = button.getAttribute('data-video');
          console.log("Button clicked, changing to video:", videoId);
          
          if (ytPlayer && typeof ytPlayer.loadVideoById === 'function') {
            ytPlayer.loadVideoById({
              'videoId': videoId,
              'startSeconds': 0,
              'suggestedQuality': 'large'
            });
            
            // Update active class
            buttons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
          } else {
            console.error("YouTube Player not ready yet");
          }
        });
      });
    }
    
    // Plein écran
    fullscreenBtn.addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
          console.log(`Erreur de passage en plein écran: ${err.message}`);
        });
        fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
          fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
        }
      }
    });
    
    // Changement de thème
    colorOptions.forEach(option => {
      option.addEventListener('click', () => {
        // Mettre à jour la classe active
        colorOptions.forEach(opt => opt.classList.remove('active'));
        option.classList.add('active');
        
        // Changer le thème
        const themeId = option.id;
        
        if (themeId === 'theme-night') {
          document.body.className = 'night-theme';
        } else if (themeId === 'theme-day') {
          document.body.className = 'day-theme';
        } else if (themeId === 'theme-pink') {
          document.body.className = 'pink-theme';
        } else if (themeId === 'theme-forest') {
          document.body.className = 'forest-theme';
        } else if (themeId === 'theme-ocean') {
          document.body.className = 'ocean-theme';
        } else if (themeId === 'theme-sunset') {
          document.body.className = 'sunset-theme';
        } else if (themeId === 'theme-galaxy') {
          document.body.className = 'galaxy-theme';
        }
        
        // Recréer les chats avec la nouvelle couleur
        generateLofiCats();
      });
    });
    
    // Citations
    const quotes = [
      "Breathe. You're here now.",
      "Small steps, big journey.",
      "This moment is all yours.",
      "Find peace in the pause.",
      "Let your mind wander and wonder.",
      "Slow down. Notice the details.",
      "Your presence is enough.",
      "The journey is the destination.",
      "Embrace the gentle quiet.",
      "This too shall pass.",
      "Inside silence there is magic.",
      "Inspiration exists, but it has to find you working.",
      "The beauty of life is in small things.",
      "Stay curious, stay chill.",
      "Creativity takes courage.",
      "Be patient with yourself."
    ];
    
    function changeQuote() {
      const randomIndex = Math.floor(Math.random() * quotes.length);
      
      // Effet de fondu
      quoteElement.style.opacity = 0;
      
      setTimeout(() => {
        quoteElement.textContent = `"${quotes[randomIndex]}"`;
        quoteElement.style.opacity = 1;
      }, 500);
    }
    
    // Changer la citation toutes les 10 secondes
    setInterval(changeQuote, 10000);
    
    // Générer les étoiles
    function generateStars() {
      starsContainer.innerHTML = '';
      const starCount = Math.min(300, Math.floor(window.innerWidth * window.innerHeight / 1000));
      
      for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.classList.add('star');
        
        // Position aléatoire
        const x = Math.random() * 100;
        const y = Math.random() * 100;
        
        // Taille aléatoire
        const size = Math.random() * 2 + 1;
        
        // Animation aléatoire
        const delay = Math.random() * 4;
        
        star.style.left = `${x}%`;
        star.style.top = `${y}%`;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.animationDelay = `${delay}s`;
        
        starsContainer.appendChild(star);
      }
    }

    // Fonction pour créer un SVG de chat lofi
    function createLofiCatSVG(color1, color2, color3) {
      // Couleurs par défaut si non fournies
      color1 = color1 || '#6A418F';
      color2 = color2 || '#483D8B';  
      color3 = color3 || '#FFFFFF';
      
      return `
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <!-- Corps principal -->
          <circle cx="50" cy="50" r="40" fill="${color1}" />
          
          <!-- Traits décoratifs -->
          <circle cx="50" cy="50" r="35" fill="${color2}" />
          
          <!-- Casque -->
          <path d="M25,30 C25,20 75,20 75,30" stroke="${color3}" stroke-width="3" fill="none" />
          <rect x="20" y="30" width="10" height="15" rx="5" fill="${color3}" />
          <rect x="70" y="30" width="10" height="15" rx="5" fill="${color3}" />
          
          <!-- Yeux -->
          <circle cx="35" cy="40" r="6" fill="${color3}" />
          <circle cx="65" cy="40" r="6" fill="${color3}" />
          <circle cx="35" cy="40" r="3" fill="#000" />
          <circle cx="65" cy="40" r="3" fill="#000" />
          
          <!-- Reflet dans les yeux -->
          <circle cx="33" cy="38" r="2" fill="white" />
          <circle cx="63" cy="38" r="2" fill="white" />
          
          <!-- Bouche -->
          <path d="M40,60 Q50,70 60,60" stroke="${color3}" stroke-width="2" fill="none" />
          
          <!-- Oreilles -->
          <path d="M20,25 Q30,10 40,25" fill="${color1}" />
          <path d="M80,25 Q70,10 60,25" fill="${color1}" />
          
          <!-- Notes de musique -->
          <g transform="translate(75, 28) scale(0.15) rotate(15)">
            <path d="M80,0 C80,0 80,80 80,80 C80,80 0,80 0,80 C0,80 80,0 80,0 z" fill="${color3}"/>
            <rect x="75" y="0" width="5" height="60" fill="${color3}"/>
          </g>
          </
